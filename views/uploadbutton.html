<!doctype html>
<html>
	<head>
		<meta charset="utf-8" />
		<title>Upload Button Examples</title>
		<script src="/javascripts/jquery.js"></script>
		<!-- Bootstrap JS -->
		<script src="/javascripts/bootstrap.min.js"></script>
		<!-- jquery Anchor JS -->
		<script src="/javascripts/jquery.arbitrary-anchor.js"></script>
		<!-- jQuery way points -->
		<script src="/javascripts/waypoints.min.js"></script>
		<!-- Respond JS for IE8 -->
		<script src="/javascripts/respond.min.js"></script>
		<!-- HTML5 Support for IE -->
		<script src="/javascripts/html5shiv.js"></script>
		<!-- kindeditor -->
		<script charset="utf-8" src="/kindeditor/kindeditor-min.js"></script>
		<script src="/kindDditor/lang/zh_CN.js"></script>
		<!-- Custom JS -->
		<script src="/javascripts/custom.js"></script>
		<script>
			KindEditor.ready(function(K) {
				var uploadbutton = K.uploadbutton({
					button : K('#uploadButton')[0],
					fieldName : 'imgFile',
					url : '../php/upload_json.php?dir=file',
					afterUpload : function(data) {
						if (data.error === 0) {
							var url = K.formatUrl(data.url, 'absolute');
							K('#url').val(url);
						} else {
							alert(data.message);
						}
					},
					afterError : function(str) {
						alert('自定义错误信息: ' + str);
					}
				});
				uploadbutton.fileBox.change(function(e) {
					uploadbutton.submit();
				});
			});
		</script>
	</head>
	<body>
		<div class="upload">
			<input class="ke-input-text" type="text" id="url" value="" readonly="readonly" /> <input type="button" id="uploadButton" value="Upload" />
		</div>
	</body>
</html>
